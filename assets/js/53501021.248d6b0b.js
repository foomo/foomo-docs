"use strict";(self.webpackChunkfoomo=self.webpackChunkfoomo||[]).push([[2346],{8486:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>d});var i=l(5893),r=l(3905),s=l(4562);const t={Title:"Files",position:14,tags:["Go Basics"]},o="Files",a={id:"backend/go-by-example/files",title:"Files",description:"There are multiple packages we can utilize for reading files in a go program. We'll go over the most commonly used ones in this section.",source:"@site/docs/backend/go-by-example/files.mdx",sourceDirName:"backend/go-by-example",slug:"/backend/go-by-example/files",permalink:"/docs/backend/go-by-example/files",draft:!1,unlisted:!1,editUrl:"https://github.com/foomo/foomo-docs/tree/main/foomo/docs/backend/go-by-example/files.mdx",tags:[{label:"Go Basics",permalink:"/docs/tags/go-basics"}],version:"current",frontMatter:{Title:"Files",position:14,tags:["Go Basics"]},sidebar:"backendSidebar",previous:{title:"Embed",permalink:"/docs/backend/go-by-example/embed"},next:{title:"Go Routines and Channels",permalink:"/docs/backend/go-by-example/goroutines-and-channels"}},c={},d=[{value:"IOUtil",id:"ioutil",level:2},{value:"Read Whole File",id:"read-whole-file",level:3},{value:"OS",id:"os",level:2},{value:"Open Files",id:"open-files",level:3},{value:"Reading Files",id:"reading-files",level:3},{value:"Writing Files",id:"writing-files",level:3},{value:"Getting File Information",id:"getting-file-information",level:3},{value:"BufIO",id:"bufio",level:2},{value:"Scanner",id:"scanner",level:3},{value:"ReadSlice",id:"readslice",level:3},{value:"ReadBytes",id:"readbytes",level:3},{value:"Examples",id:"examples",level:2},{value:"Read Lines",id:"read-lines",level:3},{value:"Read Bytes",id:"read-bytes",level:3}];function u(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,r.ah)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"files",children:"Files"}),"\n",(0,i.jsxs)(n.p,{children:["There are multiple packages we can utilize for reading files in a go program. We'll go over the most commonly used ones in this section.\nThese include: ",(0,i.jsx)(n.code,{children:"os"}),", ",(0,i.jsx)(n.code,{children:"io"}),", ",(0,i.jsx)(n.code,{children:"ioutil"})," and ",(0,i.jsx)(n.code,{children:"bufio"}),". We'll go over some commonly used methods for each of these packages in this section."]}),"\n",(0,i.jsx)(n.h2,{id:"ioutil",children:"IOUtil"}),"\n",(0,i.jsx)(n.h3,{id:"read-whole-file",children:"Read Whole File"}),"\n",(0,i.jsxs)(n.p,{children:["To read a whole file you can use the ",(0,i.jsx)(n.code,{children:"ReadFile"})," function."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"// Takes a filepath as argument\n// Returns a byteslice and an error\nbyteslice, err := ioutil.ReadFile(filepath)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"os",children:"OS"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"os"})," package provides and interface with methods to handle files on your operating system in go."]}),"\n",(0,i.jsx)(n.h3,{id:"open-files",children:"Open Files"}),"\n",(0,i.jsxs)(n.p,{children:["To open a file using the ",(0,i.jsx)(n.code,{children:"os"})," package, use the Open method. This method takes a filepath and returns the opened file and an error."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"file, err := os.Open(filepath)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"reading-files",children:"Reading Files"}),"\n",(0,i.jsxs)(n.p,{children:["To read a file using the ",(0,i.jsx)(n.code,{children:"os"})," package, use the ReadFile method. This method takes a filepath and returns the contents of the file in a byteslice and an error."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"byteslice, err := os.ReadFile(filepath)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"writing-files",children:"Writing Files"}),"\n",(0,i.jsx)(n.h3,{id:"getting-file-information",children:"Getting File Information"}),"\n",(0,i.jsxs)(n.p,{children:["To get information about a file using the ",(0,i.jsx)(n.code,{children:"os"})," package, use the Stat method. This method takes a filepath and information of the selected file and an error.\nThis information includes methods: Name() to get the name of the file, Size() to get the size the file in bytes, Mode() to get the mode of the file,\nIsDir() to find out if it is a directory, ModTime() showing when the file was last modified, and Sys() describing the underlying data source."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"fileInfo, err := os.Stat(filepath)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"bufio",children:"BufIO"}),"\n",(0,i.jsxs)(n.p,{children:["Sometimes opening a whole file is not ideal, this is for example when you have a very large log file. All of it is going to be opened in memory.\nFor these cases you can buffer the IO, this can increase the speed of your application by reducing the number of system calls made.\nBufio provides ways to read by the file in batches. Commonly used methods in the bufIO package include: ",(0,i.jsx)(n.code,{children:"Scanner"}),", ",(0,i.jsx)(n.code,{children:"ReadSlice"}),",",(0,i.jsx)(n.code,{children:"ReadBytes"})," and ",(0,i.jsx)(n.code,{children:"ReadLines"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"scanner",children:"Scanner"}),"\n",(0,i.jsxs)(n.p,{children:["Breaks the data up in tokens. Open the file with the ",(0,i.jsx)(n.code,{children:"os"})," Open function and pass the reader to the NewScanner function. This will return a pointer to a Scanner."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"myScanner =  bufio.NewScanner(myIOReader)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"readslice",children:"ReadSlice"}),"\n",(0,i.jsx)(n.p,{children:"This function returns a slice of the passed string based on the delimiter you pass it.\nIt will return every slice with the delimiter. To call it initialize a new reader with the specified string and pass the ReadSlice method a delimiter."}),"\n",(0,i.jsx)(s.X,{id:"0ZFnnUjBk6l",proportion:1.6}),"\n",(0,i.jsx)(n.h3,{id:"readbytes",children:"ReadBytes"}),"\n",(0,i.jsx)(n.p,{children:"ReadBytes builds on the ReadSlice functionality and is called in a similar fashion. The difference is that ReadSlice is bound to a buffersize, if it does\nnot reach the delimiter within that size it will fail. ReadBytes is able to call ReadSlice multiple times which means that if you go over the buffersize\nit won't encounter a problem. To demonstrate:"}),"\n",(0,i.jsx)(s.X,{id:"Jl9B6I1a8d-",proportion:1.6}),"\n",(0,i.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(n.h3,{id:"read-lines",children:"Read Lines"}),"\n",(0,i.jsxs)(n.p,{children:["The following code provides a way to read lines from a file. It uses the ",(0,i.jsx)(n.code,{children:"os"})," package to open the file and then ",(0,i.jsx)(n.code,{children:"bufio"})," to create a scanner\nthat reads the file line by line."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n\t"fmt"\n\t"os"\n    "bufio"\n)\n\nfunc main() {\n\n    file, err := os.Open(filepath)\n        if err != nil {\n            fmt.Println("Error:", err.Error())\n            return\n        }\n        defer os.Close() // Make sure to always close your resources\n\n    scanner := bufio.NewScanner(file)\n    for scanner.Scan() { // returns a boolean, so until the end of the file is reached this loop will run\n        fmt.Println(scanner.Text())\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"read-bytes",children:"Read Bytes"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n\t"fmt"\n\t"os"\n    "bufio"\n    "io"\n)\n\nfunc main() {\n\n    fileHandler, err := os.Open(filename)\n        if err != nil {\n            fmt.Println("Error:", err.Error())\n            return\n        }\n        defer os.Close() // Make sure to always close your resources\n\n\n    myBuffer := make([]byte, size) // Make a buffer with size of size\n    for { \n        readBytes, err := fileHandler.Read(buf) \n        if err != nil {\n            if err != io.EOF {\n                fmt.Println("Error:", err.Error())\n                return\n            }\n            break\n        }\n\n        fmt.Println(string(myBuffer[:readBytes]))\n    }\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.ah)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},4562:(e,n,l)=>{l.d(n,{X:()=>x});var i=l(7294),r={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},s=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],t=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],o=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],a="undefined"!=typeof window&&void 0!==window.document?window.document:{},c="fullscreenEnabled"in a&&Object.keys(r)||s[0]in a&&s||t[0]in a&&t||o[0]in a&&o||[];const d={requestFullscreen:function(e){return e[c[r.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[c[r.requestFullscreen]]},get exitFullscreen(){return a[c[r.exitFullscreen]].bind(a)},get fullscreenPseudoClass(){return":"+c[r.fullscreen]},addEventListener:function(e,n,l){return a.addEventListener(c[r[e]],n,l)},removeEventListener:function(e,n,l){return a.removeEventListener(c[r[e]],n,l)},get fullscreenEnabled(){return Boolean(a[c[r.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return a[c[r.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return a[("on"+c[r.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return a[("on"+c[r.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return a[("on"+c[r.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return a[("on"+c[r.fullscreenerror]).toLowerCase()]=e}};var u=function(e){var n=e.handle,l=e.onChange,r=e.children,s=e.className,t=[];return s&&t.push(s),t.push("fullscreen"),n.active&&t.push("fullscreen-enabled"),(0,i.useEffect)((function(){l&&l(n.active,n)}),[n.active]),i.createElement("div",{className:t.join(" "),ref:n.node,style:n.active?{height:"100%",width:"100%"}:void 0},r)},h=l(4991),f=l(9030),m=l(7087),p=l(9960),g=l(5893);const x=e=>{const[n,l]=(0,i.useState)(!1),[r,s]=(0,i.useState)(""),t=function(){var e=(0,i.useState)(!1),n=e[0],l=e[1],r=(0,i.useRef)(null);(0,i.useEffect)((function(){var e=function(){l(d.fullscreenElement===r.current)};return d.addEventListener("fullscreenchange",e),function(){return d.removeEventListener("fullscreenchange",e)}}),[]);var s=(0,i.useCallback)((function(){return d.fullscreenElement?d.exitFullscreen().then((function(){return d.requestFullscreen(r.current)})):r.current?d.requestFullscreen(r.current):void 0}),[]),t=(0,i.useCallback)((function(){return d.fullscreenElement===r.current?d.exitFullscreen():Promise.resolve()}),[]);return(0,i.useMemo)((function(){return{active:n,enter:s,exit:t,node:r}}),[n,s,t])}();(0,i.useEffect)((()=>{""==r&&""!==e.id&&fetch("https://docs.bestbytes.com/services/playground?id="+e.id,{mode:"cors"}).then((e=>e.text().then((e=>s(e))))).catch((e=>s("can not load source yet")))}),[r]);const o="https://goplay.tools/snippet/"+e.id;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{style:{paddingBottom:"1rem",width:"100%"},children:[n?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("button",{className:"button button--primary",onClick:e=>{l(!1)},children:"close playground"})," ",(0,g.jsx)("button",{className:"button button--primary"+(n?"":" disabled"),onClick:e=>{t.enter()},children:"fullscreen"})," "]}):(0,g.jsx)("button",{className:"button button--primary",onClick:e=>{l(!0)},children:"open playground"})," ",(0,g.jsxs)(p.Z,{href:o,children:["go to ",o]})]}),!n&&(0,g.jsx)(m.ZP,{...m.lG,code:r,language:"go",children:e=>{let{className:n,style:l,tokens:i,getLineProps:s,getTokenProps:t}=e;return(0,g.jsxs)("pre",{className:n,style:l,children:[""==r?"... loading sources":"",i.map(((e,n)=>(0,g.jsx)("div",{...s({line:e,key:n}),children:e.map(((e,n)=>(0,g.jsx)("span",{...t({token:e,key:n})})))})))]})}}),(0,g.jsx)("div",{style:{display:n?"block":"none"},children:(0,g.jsx)(f.k,{topic:"load external go playground, with all it\xb4s potentially evil cookies coming from https://goplay.tools",id:"goPlaygroundIsCool",children:(0,g.jsx)("div",{children:(0,g.jsx)(u,{handle:t,children:(0,g.jsx)(h.h,{src:o,proportion:e.proportion})})})})})]})}},4991:(e,n,l)=>{l.d(n,{h:()=>r});l(7294);var i=l(5893);const r=e=>{let{proportion:n,src:l,style:r}=e;return n||(n=4/3),r&&(r={}),(0,i.jsx)("div",{style:{width:"100%",height:0,paddingTop:100/n+"%",position:"relative",float:"left",...r},children:(0,i.jsx)("iframe",{style:{width:"100%",height:"100%",display:"block",position:"absolute",top:0,left:0},src:l,frameBorder:"0",scrolling:"no",allowFullScreen:!0})})}},9030:(e,n,l)=>{l.d(n,{k:()=>t});var i=l(7294),r=l(5893);const s="undefined"==typeof localStorage,t=e=>{const[n,l]=(0,i.useState)((t=e.id,"undefined"!=typeof localStorage&&localStorage.getItem(t)));var t;return(0,i.useEffect)((()=>{console.log("well it is cool",e.id,{isCool:n,SSR:s})}),[n,s]),n?e.children:(0,r.jsx)("div",{children:(0,r.jsx)("button",{className:"button button--lg button--secondary",onClick:n=>{localStorage.setItem(e.id,"yes"),l(!0)},children:e.topic})})}}}]);